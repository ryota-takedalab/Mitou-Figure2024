ローカル環境でテスト
Webサーバー:Apache(XAMPP)
フロントエンドサーバー:Next.js
バックエンドサーバー:FastAPI

動作環境
python@3.10.10
Apache@2.4.58 (Win64)
next@14cd.1.0
npm@10.4.0
node@v20.11.0
fastapi@0.109.0
uvicorn@0.27.0.post1
ffmpeg@1.4
ffmpeg-python@0.2.0
aiofiles@23.2.1
opencv-python@4.9.0.80
opencv-python-headless@4.9.0.80

//
Apacheのhttpd.conf
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so
のコメントアウトを削除(Apacheをリバースプロキシにするのに必要)

//
バックエンドサーバーの起動
backendフォルダ直下のターミナルで uvicorn ○○:app --reload  #○○にはファイル名(movie.pyならmovie)
//
フロントエンドサーバーの起動
frontendフォルダ直下のターミナルで npm run dev 

//
デベロッパーツールのコンソール上でws://localhost/_next/webpack-hmr' failed: Websocketのエラーが出たら
httpd.confに以下のコードを追記
<Location /_next/webpack-hmr>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} transport=websocket [NC]
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule /(.*) ws://localhost:3000/_next/webpack-hmr/$1 [P,L]
    ProxyPass ws://localhost:3000/_next/webpack-hmr retry=0 timeout=30
    ProxyPassReverse ws://localhost:3000/_next/webpack-hmr
 </Location>

 //
 ffmpegのインストール(本体DL+ PATHを通す+ pip)
 ブラウザ上で動画を読み込むのにH.264であることが必要